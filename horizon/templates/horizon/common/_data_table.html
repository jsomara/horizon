{% load i18n %}
<div ng-app="test">
<div ng-controller="DomainGroupController">
    <button class="btn" ng-click="open()">Open me!</button>
</div>

<div ng-controller="DomainGroupController">
    <script type="text/ng-template" id="group_modal.html">
        <div id="modal_wrapper">
            <div class="workflow modal dropdown_fix in">
                <div class="modal-header">
                    <h3>Edit Domain</h3>
                </div>
                <div class="modal-body clearfix">
                  <div class="row">
                    <div class="col-md-3">
                        <table class="table table-striped table-condensed table-bordered">
                            <thead>
                            <td>Name</td>
                            <td>
                                <div class="bar">
                                    <input type="text" ng-model="searchAll" placeholder="Filter"/>
                                </div>
                            </td>
                            </thead>
                            <tr ng-repeat="group in allGroups | searchFor:searchAll">
                                <td ng-bind='group'></td>
                                <td>
                                    <button type="button" class="btn btn-primary" ng-click="addToDomain(group)">Add</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-3">
                        <table class="table table-striped table-condensed table-bordered">
                            <thead>
                            <td>Name</td>
                            <td>
                                <div class="bar">
                                    <input type="text" ng-model="searchDomain" placeholder="Filter"/>
                                </div>
                            </td>
                            </thead>
                            <tr ng-repeat="group in domainGroups | searchFor:searchDomain">
                                <td ng-bind='group'></td>
                                <td>
                                    <button type="button" class="btn btn-primary" ng-click="removeFromDomain(group)">Remove</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" ng-click="save()">OK</button>
                    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                </div>
            </div>
        </div>
    </script>
</div>


{% with table.needs_form_wrapper as needs_form_wrapper %}
<div class="table_wrapper">
  {% if needs_form_wrapper %}<form action="{{ table.get_absolute_url }}" method="POST">{% csrf_token %}{% endif %}
  {% with columns=table.get_columns rows=table.get_rows %}
{% block table %}
  <table id="{{ table.name }}" class="table table-bordered table-striped datatable">
    <thead>
  {% block table_caption %}
      <tr class='table_caption'>
        <th class='table_header' colspan='{{ columns|length }}'>
          <h3 class='table_title'>{{ table }}</h3>
          {{ table.render_table_actions }}
        </th>
      </tr>
  {% endblock table_caption %}
  {% block table_breadcrumb %}
      {% if table.breadcrumb %}
        <tr>
          <td class="breadcrumb_td" colspan="{{ table.get_columns|length }}">
            {{ table.breadcrumb.render }}
          </td>
        </tr>
      {% endif %}
  {% endblock table_breadcrumb %}
  {% block table_columns %}
      {% if not table.is_browser_table %}
      <tr>
        {% for column in columns %}
          <th {{ column.attr_string|safe }}>{{ column }}</th>
        {% endfor %}
      </tr>
      {% endif %}
  {% endblock table_columns %}
    </thead>
  {% block table_body %}
    <tbody>
    {% for row in rows %}
      {{ row.render }}
    {% empty %}
    <tr class="{% cycle 'odd' 'even' %} empty">
      <td colspan="{{ table.get_columns|length }}">{{ table.get_empty_message }}</td>
    </tr>
    {% endfor %}
    </tbody>
  {% endblock table_body %}
  {% block table_footer %}
    {% if table.footer %}
    <tfoot>
      {% if table.needs_summary_row %}
      <tr class="summation">
        {% for column in columns %}
          {% if forloop.first %}
          <td>{% trans "Summary" %}</td>
          {% else %}
          <td>{{ column.get_summation|default_if_none:"&ndash;"}}</td>
          {% endif %}
        {% endfor %}
      </tr>
      {% endif %}
      <tr>
        <td colspan="{{ table.get_columns|length }}">
          <span class="table_count">{% blocktrans count counter=rows|length %}Displaying {{ counter }} item{% plural %}Displaying {{ counter }} items{% endblocktrans %}</span>
          {% if table.has_more_data %}
          <span class="spacer">|</span>
          <a href="?{{ table.get_pagination_string }}">More&nbsp;&raquo;</a>
          {% endif %}
        </td>
      </tr>
    </tfoot>
    {% endif %}
  {% endblock table_footer %}
  </table>
{% endblock table %}
  {% endwith %}
  {% if needs_form_wrapper %}</form>{% endif %}
</div>
{% endwith %}